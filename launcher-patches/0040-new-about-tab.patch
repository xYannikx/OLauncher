From 7b3daef600b7b41470a243981a7ea45bb9ca658c Mon Sep 17 00:00:00 2001
From: RagedMeteor1837 <148640131+RagedMeteor1837@users.noreply.github.com>
Date: Sun, 8 Feb 2026 16:37:34 +0000
Subject: [PATCH] new about tab


diff --git a/src/main/java/net/minecraft/launcher/LauncherConstants.java b/src/main/java/net/minecraft/launcher/LauncherConstants.java
index 9b454cf..a74988a 100644
--- a/src/main/java/net/minecraft/launcher/LauncherConstants.java
+++ b/src/main/java/net/minecraft/launcher/LauncherConstants.java
@@ -22,6 +22,8 @@ public class LauncherConstants {
     public static final String URL_RESOURCE_BASE = "https://resources.download.minecraft.net/";
     public static final String URL_LIBRARY_BASE = "https://libraries.minecraft.net/";
     public static final String URL_BLOG = System.getProperty("dev.figboot.olauncher.URLNews", "https://ragedmeteor1837.github.io/mcnews/news/");
+    public static final String URL_ABOUT = System.getProperty("dev.figboot.olauncher.URLAbout", "https://ragedmeteor1837.github.io/olauncherabout/news/");
+    public static final String URL_GITHUB_REPO = System.getProperty("dev.figboot.olauncher.URLGitHub", "https://github.com/ragedmeteor1837/olauncher");
     public static final String URL_SUPPORT = "https://help.minecraft.net/";
     public static final String URL_STATUS_CHECKER = "https://olauncherstatus.onrender.com/status";
     public static final int UNVERSIONED_BOOTSTRAP_VERSION = 0;
diff --git a/src/main/java/net/minecraft/launcher/ui/tabs/AboutTab.java b/src/main/java/net/minecraft/launcher/ui/tabs/AboutTab.java
index 3f2d61f..c968950 100644
--- a/src/main/java/net/minecraft/launcher/ui/tabs/AboutTab.java
+++ b/src/main/java/net/minecraft/launcher/ui/tabs/AboutTab.java
@@ -1,5 +1,4 @@
 // AboutTab.java - RagedMeteor1837 - OLauncher
-// A tab showing information about the launcher, service status, and release notes.
 
 package net.minecraft.launcher.ui.tabs;
 
@@ -9,12 +8,12 @@ import com.google.gson.JsonElement;
 import com.google.gson.JsonObject;
 
 import javax.swing.BorderFactory;
+import javax.swing.Box;
 import javax.swing.BoxLayout;
 import javax.swing.JLayeredPane;
 import javax.swing.JComponent;
 import javax.swing.JLabel;
 import javax.swing.JPanel;
-import javax.swing.JScrollPane;
 import javax.swing.JSeparator;
 import javax.swing.SwingUtilities;
 import javax.swing.UIManager;
@@ -41,42 +40,21 @@ import java.util.LinkedHashMap;
 import java.util.List;
 import java.util.Map;
 
+import com.mojang.launcher.OperatingSystem;
 import dev.figboot.olauncher.launcher.LauncherVersion;
 import net.minecraft.launcher.Launcher;
+import net.minecraft.launcher.LauncherConstants;
 
-public class AboutTab extends JScrollPane {
+public class AboutTab extends JPanel {
     private final Launcher minecraftLauncher;
 
-    private final JLabel aboutLabel = new JLabel();
-    private final String aboutBody =
-            "<h3 style='font-size:13px;margin:0 0 6px 0;'>About OLauncher</h3>"
-        + "The old launcher we all know and love with the quality-of-life features of the new launcher."
-        + "<br><br>"
-        + "This project is maintained on a best-effort basis and updates will only be made when I have the time. The fork was originally created to ensure the launcher could display new update notes and similar fixes. There are currently no planned features beyond this scope."
-        + "<br><br>"
-        + "<h4>Features:</h4>"
-        + "<ul style='margin:0; padding-left:10px; list-style-position:inside;'>"
-        + "  <li>Microsoft authentication</li>"
-        + "  <li>Bundled JVMs</li>"
-        + "  <ul style='margin:2px 0 0 0; padding-left:12px; list-style-position:inside;'>"
-        + "    <li>Automatically downloads the appropriate JVM for all Minecraft versions</li>"
-        + "    <li>You just need a runtime to open the actual launcher</li>"
-        + "    <li>You can still provide your own JVMs</li>"
-        + "  </ul>"
-        + "  <li>Update checking</li>"
-        + "  <li>Displays Mojang Server Status</li>"
-        + "  <li>Displays latest release notes</li>"
-        + "</ul>";
+    private final WebsiteTab websiteTab;
 
     private final JLabel statusLabel = new JLabel("<html>Loading status…</html>");
-    private final JPanel statusBox;
-
-    private final JLabel releaseLabel = new JLabel("<html>Loading release notes…</html>");
-    private final JPanel releaseBox;
 
     private final StretchyLayeredPane layered;
 
-    private int lastAboutWidth = -1;
+    
 
     private static final Map<String, String> DEFAULT_DISPLAY_NAMES;
     static {
@@ -101,45 +79,20 @@ public class AboutTab extends JScrollPane {
     private static final String GH_REPO  = "olauncher";
 
     public AboutTab(Launcher launcher) {
+        super(new BorderLayout());
         this.minecraftLauncher = launcher;
-
         setOpaque(true);
         setBackground(Color.WHITE);
-        getViewport().setOpaque(true);
-        getViewport().setBackground(Color.WHITE);
-        setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
-        getVerticalScrollBar().setUnitIncrement(16);
-
-        JPanel left = new JPanel(new GridBagLayout());
-        left.setOpaque(true);
-        left.setBackground(Color.WHITE);
-
-        GridBagConstraints lc = new GridBagConstraints();
-        lc.gridx = 0; lc.gridy = 0;
-        lc.weightx = 1.0; lc.weighty = 1.0;
-        lc.anchor = GridBagConstraints.NORTHWEST;
-        lc.fill = GridBagConstraints.HORIZONTAL;
-        lc.insets = new Insets(8, 8, 8, 8);
-
-        aboutLabel.setOpaque(true);
-        aboutLabel.setBackground(Color.WHITE);
-        aboutLabel.setText(buildAboutHtml(520));
-        left.add(aboutLabel, lc);
-
-        JScrollPane leftScroll = new JScrollPane(left);
-        leftScroll.setBorder(null);
-        leftScroll.setOpaque(true);
-        leftScroll.setBackground(Color.WHITE);
-        leftScroll.getViewport().setOpaque(true);
-        leftScroll.getViewport().setBackground(Color.WHITE);
-        leftScroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
-        leftScroll.getVerticalScrollBar().setUnitIncrement(16);
-        leftScroll.setMinimumSize(new Dimension(0, 0));
+
+        this.websiteTab = new WebsiteTab(launcher);
+        this.websiteTab.setPage(LauncherConstants.URL_ABOUT);
+        
+        disableWebsiteInteraction(this.websiteTab);
 
         JPanel base = new JPanel(new BorderLayout());
         base.setOpaque(true);
         base.setBackground(Color.WHITE);
-        base.add(leftScroll, BorderLayout.CENTER);
+        base.add(this.websiteTab, BorderLayout.CENTER);
 
         Color sideBg = UIManager.getColor("Panel.background");
         if (sideBg == null) sideBg = new Color(240, 240, 240);
@@ -149,80 +102,76 @@ public class AboutTab extends JScrollPane {
         Font labelFont = UIManager.getFont("Label.font");
         if (labelFont == null) labelFont = new JLabel().getFont();
 
-        statusBox = new JPanel();
-        statusBox.setLayout(new BoxLayout(statusBox, BoxLayout.Y_AXIS));
-        statusBox.setOpaque(true);
-        statusBox.setBackground(sideBg);
-        statusBox.setBorder(new CompoundBorder(
+
+        JPanel sidebarBox = new JPanel();
+        sidebarBox.setLayout(new BoxLayout(sidebarBox, BoxLayout.Y_AXIS));
+        sidebarBox.setOpaque(true);
+        sidebarBox.setBackground(sideBg);
+        sidebarBox.setBorder(new CompoundBorder(
             BorderFactory.createLineBorder(borderCol, 1, true),
             new EmptyBorder(8, 10, 10, 10)
         ));
 
-        JLabel statusHeader = new JLabel("Service Status");
-        statusHeader.setFont(labelFont.deriveFont(labelFont.getStyle() | Font.BOLD));
-        statusHeader.setOpaque(false);
-        fillWidth(statusHeader);
+        JLabel descText = new JLabel(
+            "<html><div width='150'>"
+            + "The old launcher we all know and love with the QoL features of the new launcher. "
+            + "<br><br>"
+            + "<b>Project Status:</b><br>"
+            + "This project is maintained on a best-effort basis and updates will only be made when I have the time. "
+            + "<br><br>"
+            + "<a href='" + LauncherConstants.URL_GITHUB_REPO + "'>GitHub Repository</a>"
+            + "</div></html>"
+        );
+        descText.setOpaque(false);
+        descText.setFont(labelFont);
+        descText.setAlignmentX(JComponent.LEFT_ALIGNMENT);
+        
+        descText.addMouseListener(new java.awt.event.MouseAdapter() {
+            @Override
+            public void mouseClicked(java.awt.event.MouseEvent e) {
+                try {
+                    OperatingSystem.openLink(new java.net.URI(LauncherConstants.URL_GITHUB_REPO));
+                } catch (Exception ex) {
+                }
+            }
+        });
+        descText.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
+        
+        sidebarBox.add(descText);
 
-        JSeparator statusSep = new JSeparator();
-        fillWidth(statusSep);
+        sidebarBox.add(Box.createVerticalGlue());
 
-        JPanel statusContent = new JPanel(new GridBagLayout());
-        statusContent.setOpaque(false);
-        fillWidth(statusContent);
+        JSeparator divider = new JSeparator(JSeparator.HORIZONTAL);
+        divider.setAlignmentX(JComponent.LEFT_ALIGNMENT);
+        divider.setMaximumSize(new Dimension(Integer.MAX_VALUE, 1));
+        sidebarBox.add(divider);
 
-        GridBagConstraints rc = new GridBagConstraints();
-        rc.gridx = 0; rc.gridy = 0;
-        rc.weightx = 0.0; rc.weighty = 0.0;
-        rc.fill = GridBagConstraints.NONE;
-        rc.anchor = GridBagConstraints.NORTHWEST;
-        rc.insets = new Insets(6, 0, 0, 0);
+        JPanel statusPanel = new JPanel();
+        statusPanel.setLayout(new BoxLayout(statusPanel, BoxLayout.Y_AXIS));
+        statusPanel.setOpaque(false);
+        statusPanel.setAlignmentX(JComponent.LEFT_ALIGNMENT);
+
+        JLabel statusHeader2 = new JLabel("Service Status:");
+        statusHeader2.setFont(labelFont.deriveFont(labelFont.getStyle() | Font.BOLD));
+        statusHeader2.setOpaque(false);
+        statusHeader2.setAlignmentX(JComponent.LEFT_ALIGNMENT);
+        statusPanel.add(statusHeader2);
 
         statusLabel.setOpaque(false);
         statusLabel.setFont(labelFont);
-        statusContent.add(statusLabel, rc);
-
-        statusBox.add(statusHeader);
-        statusBox.add(statusSep);
-        statusBox.add(statusContent);
+        statusLabel.setAlignmentX(JComponent.LEFT_ALIGNMENT);
+        statusPanel.add(statusLabel);
 
-        releaseBox = new JPanel();
-        releaseBox.setLayout(new BoxLayout(releaseBox, BoxLayout.Y_AXIS));
-        releaseBox.setOpaque(true);
-        releaseBox.setBackground(sideBg);
-        releaseBox.setBorder(new CompoundBorder(
-            BorderFactory.createLineBorder(borderCol, 1, true),
-            new EmptyBorder(8, 10, 10, 10)
-        ));
-
-        JLabel releaseHeader = new JLabel("Release Notes");
-        releaseHeader.setFont(labelFont.deriveFont(labelFont.getStyle() | Font.BOLD));
-        releaseHeader.setOpaque(false);
-        fillWidth(releaseHeader);
-
-        JSeparator releaseSep = new JSeparator();
-        fillWidth(releaseSep);
+        sidebarBox.add(statusPanel);
 
-        JPanel releaseContent = new JPanel(new GridBagLayout());
-        releaseContent.setOpaque(false);
-        fillWidth(releaseContent);
+        JPanel sidebar = new JPanel(new BorderLayout());
+        sidebar.setOpaque(true);
+        sidebar.setBackground(Color.WHITE);
+        sidebar.add(sidebarBox, BorderLayout.CENTER);
 
-        GridBagConstraints rcc = new GridBagConstraints();
-        rcc.gridx = 0; rcc.gridy = 0;
-        rcc.weightx = 0.0; rcc.weighty = 0.0;
-        rcc.fill = GridBagConstraints.NONE;
-        rcc.anchor = GridBagConstraints.NORTHWEST;
-        rcc.insets = new Insets(6, 0, 0, 0);
+        base.add(sidebar, BorderLayout.EAST);
 
-        releaseLabel.setOpaque(false);
-        releaseLabel.setFont(labelFont);
-        releaseLabel.setText("<html>Loading release notes…</html>");
-        releaseContent.add(releaseLabel, rcc);
-
-        releaseBox.add(releaseHeader);
-        releaseBox.add(releaseSep);
-        releaseBox.add(releaseContent);
-
-        layered = new StretchyLayeredPane(base, statusBox, releaseBox);
+        layered = new StretchyLayeredPane(base, null, null);
         layered.setOpaque(true);
         layered.setBackground(Color.WHITE);
         layered.setMargin(8);
@@ -236,17 +185,39 @@ public class AboutTab extends JScrollPane {
         JPanel rootBorderWrap = new JPanel(new BorderLayout());
         rootBorderWrap.setOpaque(true);
         rootBorderWrap.setBackground(Color.WHITE);
-        rootBorderWrap.setBorder(new EmptyBorder(8, 8, 8, 8));
         rootBorderWrap.add(layered, BorderLayout.CENTER);
 
-        setViewportView(rootBorderWrap);
+        this.add(rootBorderWrap, BorderLayout.CENTER);
 
         fetchAndRenderStatus();
-        fetchAndRenderReleaseNotes();
 
         SwingUtilities.invokeLater(this::adjustProportions);
     }
 
+    private void disableWebsiteInteraction(WebsiteTab tab) {
+        try {
+            java.lang.reflect.Field browserField = WebsiteTab.class.getDeclaredField("browser");
+            browserField.setAccessible(true);
+            Object browser = browserField.get(tab);
+            
+            if (browser != null) {
+                java.lang.reflect.Field scrollPaneField = browser.getClass().getDeclaredField("scrollPane");
+                scrollPaneField.setAccessible(true);
+                javax.swing.JScrollPane scrollPane = (javax.swing.JScrollPane) scrollPaneField.get(browser);
+                
+                java.lang.reflect.Field browserPaneField = browser.getClass().getDeclaredField("browser");
+                browserPaneField.setAccessible(true);
+                javax.swing.JTextPane textPane = (javax.swing.JTextPane) browserPaneField.get(browser);
+                
+                for (javax.swing.event.HyperlinkListener listener : textPane.getHyperlinkListeners()) {
+                    textPane.removeHyperlinkListener(listener);
+                }
+            }
+        } catch (Exception e) {
+
+        }
+    }
+
     public Launcher getMinecraftLauncher() {
         return this.minecraftLauncher;
     }
@@ -315,70 +286,6 @@ public class AboutTab extends JScrollPane {
         }, "Status-Fetcher").start();
     }
 
-    private void fetchAndRenderReleaseNotes() {
-        new Thread(() -> {
-            try {
-                String api = "https://api.github.com/repos/" + GH_OWNER + "/" + GH_REPO + "/releases/latest";
-                URL url = new URL(api);
-                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
-                conn.setRequestMethod("GET");
-                conn.setConnectTimeout(7000);
-                conn.setReadTimeout(10000);
-                conn.setRequestProperty("Accept", "application/vnd.github+json");
-                conn.setRequestProperty("User-Agent", "OLauncher/AboutTab (" + LauncherVersion.getLauncherName() + ")");
-                String token = System.getenv("GITHUB_TOKEN");
-                if (token != null && !token.isEmpty()) {
-                    conn.setRequestProperty("Authorization", "Bearer " + token);
-                }
-
-                int http = conn.getResponseCode();
-                if (http != HttpURLConnection.HTTP_OK) throw new RuntimeException("HTTP " + http);
-
-                StringBuilder content = new StringBuilder();
-                try (BufferedReader in = new BufferedReader(
-                        new InputStreamReader(conn.getInputStream(), StandardCharsets.UTF_8))) {
-                    String line;
-                    while ((line = in.readLine()) != null) content.append(line);
-                } finally {
-                    conn.disconnect();
-                }
-
-                JsonObject obj = new Gson().fromJson(content.toString(), JsonObject.class);
-                String tag     = safeStr(obj.get("tag_name"));
-                String name    = safeStr(obj.get("name"));
-                String bodyMd  = safeStr(obj.get("body"));
-
-                String title = (name != null && !name.isEmpty()) ? name :
-                               (tag  != null && !tag.isEmpty())  ? tag  : "(untitled release)";
-
-                String bullets = markdownToLeftBullets(bodyMd);
-
-                final String html =
-                    "<html><b>" + escape(title) + "</b>"
-                  + (bullets.isEmpty() ? "" : "<br>" + bullets)
-                  + "</html>";
-
-                SwingUtilities.invokeLater(() -> {
-                    releaseLabel.setText(html);
-                    releaseBox.revalidate();
-                    layered.revalidate();
-                    layered.repaint();
-                    adjustProportions();
-                });
-
-            } catch (Exception e) {
-                SwingUtilities.invokeLater(() -> {
-                    releaseLabel.setText(
-                        "<html><b>Failed to load release notes</b><br/>" + escape(e.getMessage()) + "</html>"
-                    );
-                    releaseBox.revalidate();
-                    layered.revalidate();
-                    layered.repaint();
-                    adjustProportions();
-                });
-            }
-        }, "GitHub-Release-Fetcher").start();
-    }
 
     private void renderStatusHtml() {
         List<HostState> items = this.lastStatuses;
@@ -407,41 +314,18 @@ public class AboutTab extends JScrollPane {
         statusLabel.setText(html.toString());
 
         SwingUtilities.invokeLater(() -> {
-            statusBox.revalidate();
             layered.revalidate();
             layered.repaint();
         });
     }
 
     private void adjustProportions() {
-        if (layered == null || aboutLabel == null) return;
-
-        int w = layered.getWidth();
-        if (w <= 0) return;
-
-        int margin = layered.getMargin();
-        int rightW = 0;
-        if (statusBox != null) rightW = Math.max(rightW, statusBox.getPreferredSize().width);
-        if (releaseBox != null) rightW = Math.max(rightW, releaseBox.getPreferredSize().width);
-
-        int reservedRight = rightW + margin * 2;
-        int innerPadding = 8 * 2;
-
-        int target = Math.max(280, w - reservedRight - innerPadding);
-        target = Math.min(target, 900);
-
-        if (target != lastAboutWidth) {
-            aboutLabel.setText(buildAboutHtml(target));
-            lastAboutWidth = target;
-            aboutLabel.revalidate();
-            layered.revalidate();
-            layered.repaint();
-        }
+        if (layered == null) return;
+        layered.revalidate();
+        layered.repaint();
     }
 
-    private String buildAboutHtml(int widthPx) {
-        return "<html><div width='" + widthPx + "'>" + aboutBody + "</div></html>";
-    }
+    
 
     private String displayNameFor(String host) {
         String n = displayNames.get(host);
@@ -505,7 +389,7 @@ public class AboutTab extends JScrollPane {
     private static final class StretchyLayeredPane extends JLayeredPane {
         private final JPanel base;
         private final JPanel topRight;
-        private final JPanel bottomRight;
+        private final JPanel bottomRight; // may be null if no bottom-right panel is required
         private int margin = 8;
 
         StretchyLayeredPane(JPanel base, JPanel topRight, JPanel bottomRight) {
@@ -513,8 +397,8 @@ public class AboutTab extends JScrollPane {
             this.topRight = topRight;
             this.bottomRight = bottomRight;
             add(base, DEFAULT_LAYER);
-            add(topRight, PALETTE_LAYER);
-            add(bottomRight, PALETTE_LAYER);
+            if (topRight != null) add(topRight, PALETTE_LAYER);
+            if (bottomRight != null) add(bottomRight, PALETTE_LAYER);
         }
 
         int getMargin() { return margin; }
@@ -530,24 +414,31 @@ public class AboutTab extends JScrollPane {
 
             base.setBounds(0, 0, w, h);
 
-            Dimension dTop = topRight.getPreferredSize();
-            int topX = Math.max(margin, w - dTop.width - margin);
+            Dimension dTop = new Dimension(0, 0);
+            int topX = margin;
             int topY = margin;
-            topRight.setBounds(topX, topY, dTop.width, dTop.height);
+            if (topRight != null) {
+                dTop = topRight.getPreferredSize();
+                topX = Math.max(margin, w - dTop.width - margin);
+                topY = margin;
+                topRight.setBounds(topX, topY, dTop.width, dTop.height);
+            }
 
-            Dimension dBot = bottomRight.getPreferredSize();
-            int botX = Math.max(margin, w - dBot.width - margin);
-            int botY = Math.max(margin, h - dBot.height - margin);
+            if (bottomRight != null) {
+                Dimension dBot = bottomRight.getPreferredSize();
+                int botX = Math.max(margin, w - dBot.width - margin);
+                int botY = Math.max(margin, h - dBot.height - margin);
 
-            int topBottom = topY + dTop.height + margin;
-            if (botY < topBottom) {
-                botY = topBottom;
-                if (botY + dBot.height + margin > h) {
-                    botY = Math.max(margin, h - dBot.height - margin);
+                int topBottom = topY + dTop.height + margin;
+                if (botY < topBottom) {
+                    botY = topBottom;
+                    if (botY + dBot.height + margin > h) {
+                        botY = Math.max(margin, h - dBot.height - margin);
+                    }
                 }
-            }
 
-            bottomRight.setBounds(botX, botY, dBot.width, dBot.height);
+                bottomRight.setBounds(botX, botY, dBot.width, dBot.height);
+            }
         }
     }
 }
-- 
2.53.0.windows.1

